<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Mon tableau</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <style>
    h1 {
      color: green;
    }
    th, td {
      border: 1px solid black;
      padding: 10px;
      }

    </style>
  </head>
  <body>
    <h1>Mon TABLEAU</h1>
    <div id="tableau"></div>

    <script  type="text/babel">
      var Tableau = Tableau || {};
      var Tableau = (function () {
        var _Tableau = function _Tableau (name, data, colHeaders, rowHeaders) {
          console.log("I am a Table");
          var _name = name || 'myTable';
          var _data = data || [[{value: ""}]];
          var _colHeaders = colHeaders || [""];
          var _rowHeaders = rowHeaders || [""];
          var row = _rowHeaders.length || 1;
          var col = _colHeaders.length || 1;
          var size = row * col || 1;
          
          this.row = function() {console.log(row);};
          this.col = function() {console.log(col);};
          this.size = function() {console.log(size);};
          
          this.getTable = function() {
            return {
              tableName: _name,
              rowHeaders: _rowHeaders,
              colHeaders: _colHeaders,
              data: _data
            };
          };
          this.addRow = function(rowName) {
            var tmpRow = [];
            var tmpObj;
            tmpRow = _colHeaders.map(function(item, index) {
              if(index === 0) {
                tmpObj = new Tableau.Cellule(rowName);
                return tmpObj;
                return tmpRow.push({value: rowName})
              } else {
                tmpObj = new Tableau.Cellule();
                return tmpObj;
              }
              delete tmpObj.value;
            });
            _rowHeaders.push(rowName);
            _data.push(tmpRow);
          };
          this.addCol = function(colName) {
            var tmpObj;
            
            _colHeaders.push(colName);
            
            
            for (var i = 0; i < _rowHeaders.length; i++) {
              if(i === 0) {
                tmpObj = new Tableau.Cellule(colName);
                _data[0].push(tmpObj);
              } else {
                tmpObj = new Tableau.Cellule();
                _data[i].push(tmpObj);
              }
            }
          };
          this.deleteRow = function(rowName) {
            for (var i = 0; i < _rowHeaders.length; i++) {
              if (_data[i][0].value === rowName) {
                for (var j = 0; j < _colHeaders.length; j++) {
                  delete _data[i][j].value;
                }
                _data.splice(i,1);
                _rowHeaders.splice(i,1);
                i = _rowHeaders.length;
              }
            }
          };
          this.deleteCol = function(colName) {
            var index;
            for (var j = 0; j < _colHeaders.length ; j++) {
              if(_colHeaders[j] === colName) {
                index = j;
              }
            }
            for (var i = 0; i < _rowHeaders.length; i++) {
                  delete _data[i][index].value;
                  _data[i].splice(index,1);
            }
            _colHeaders.splice(index,1);
          };
        };
        
        return {
          create: function(name) {
            var tmpsTab = new _Tableau(name);
            return tmpsTab;
          },
          Cellule: function Cellule(value) {
            this.value = value || "";
          }
        }
      
      })();
      
      var tableau = Tableau.create("mon tableau",[[""]],[""],[""]);
      tableau.addRow('firstRow');
      tableau.addRow('secundRow');
      tableau.addCol('firstCol');
      tableau.deleteRow('firstRow');
      tableau.deleteCol('firstCol');
      tableau.row();
      console.log(tableau.getTable());
      
      var app;
      var App = React.createClass({
        render: function() {
          return (
            <div>I am an App !</div>
          );
        }
      });
    
      app = ReactDOM.render(
        <App/>, document.getElementById('tableau')
      );
    
    </script>
  </body>
</html>